<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome Anni âœ¨</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
      color: #00ffea;
      font-family: 'Courier New', Courier, monospace;
    }
    #glitch-logo {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      animation: glitch 1s infinite;
    }
    @keyframes glitch {
      0% { transform: translate(-50%, 0); }
      20% { transform: translate(-52%, 2px); }
      40% { transform: translate(-48%, -2px); }
      60% { transform: translate(-50%, 1px); }
      80% { transform: translate(-51%, -1px); }
      100% { transform: translate(-50%, 0); }
    }
    #loading-screen {
      position: fixed;
      width: 100%;
      height: 100%;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2em;
      z-index: 9999;
    }
  </style>
</head>
<body>

<!-- Glitch Anni Logo -->
<img src="assets/glitch-anni.png" id="glitch-logo" alt="Anni Glitch Logo">

<!-- Loading Screen -->
<div id="loading-screen">Loading... âš¡</div>

<canvas id="starfield"></canvas>
<canvas id="matrix"></canvas>
<canvas id="particles"></canvas>
<input type="file" id="audioUpload" accept="audio/*" style="position:fixed; bottom:10px; left:10px; z-index:999;">

<script>
  // Loading Screen
  window.onload = () => {
    setTimeout(() => {
      document.getElementById('loading-screen').style.display = 'none';
    }, 3000);
  }

  // Starfield
  const starfield = document.getElementById('starfield');
  const ctx1 = starfield.getContext('2d');
  starfield.width = window.innerWidth;
  starfield.height = window.innerHeight;
  let stars = [];

  for (let i = 0; i < 100; i++) {
    stars.push({x: Math.random()*starfield.width, y: Math.random()*starfield.height, r: Math.random()*1.5});
  }

  function drawStars() {
    ctx1.clearRect(0,0,starfield.width,starfield.height);
    ctx1.fillStyle = '#0ff';
    stars.forEach(s => {
      ctx1.beginPath();
      ctx1.arc(s.x, s.y, s.r, 0, Math.PI*2);
      ctx1.fill();
    });
    requestAnimationFrame(drawStars);
  }
  drawStars();

  // Matrix Rain
  const matrix = document.getElementById('matrix');
  const ctx2 = matrix.getContext('2d');
  matrix.width = window.innerWidth;
  matrix.height = window.innerHeight;

  let letters = Array(256).join("1").split("");

  function drawMatrix() {
    ctx2.fillStyle = 'rgba(0,0,0,0.05)';
    ctx2.fillRect(0,0,matrix.width,matrix.height);
    ctx2.fillStyle = '#0f0';
    letters.map(function(y_pos, index){
      let text = String.fromCharCode(3e4+Math.random()*33);
      let x_pos = index*10;
      ctx2.fillText(text, x_pos, y_pos);
      letters[index] = (y_pos > 758+Math.random()*1e4) ? 0 : y_pos+10;
    });
  }
  setInterval(drawMatrix, 50);

  // Particle Magic
  const particles = document.getElementById('particles');
  const ctx3 = particles.getContext('2d');
  particles.width = window.innerWidth;
  particles.height = window.innerHeight;
  let dots = [];

  for (let i = 0; i < 200; i++) {
    dots.push({
      x: Math.random()*particles.width,
      y: Math.random()*particles.height,
      vx: (Math.random()-0.5)*2,
      vy: (Math.random()-0.5)*2
    });
  }

  function drawParticles() {
    ctx3.clearRect(0,0,particles.width,particles.height);
    ctx3.fillStyle = '#0ff';
    dots.forEach(p => {
      ctx3.beginPath();
      ctx3.arc(p.x, p.y, 2, 0, Math.PI*2);
      ctx3.fill();
      p.x += p.vx;
      p.y += p.vy;
      if(p.x<0 || p.x>particles.width) p.vx*=-1;
      if(p.y<0 || p.y>particles.height) p.vy*=-1;
    });
    requestAnimationFrame(drawParticles);
  }
  drawParticles();

  // Audio Reactive
  const audioUpload = document.getElementById('audioUpload');
  let audioCtx, analyser, source;

  audioUpload.onchange = function(){
    const file = this.files[0];
    const audio = new Audio(URL.createObjectURL(file));
    audio.play();

    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioCtx.createAnalyser();
    source = audioCtx.createMediaElementSource(audio);
    source.connect(analyser);
    analyser.connect(audioCtx.destination);

    analyser.fftSize = 256;
    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    function animateAudio(){
      requestAnimationFrame(animateAudio);
      analyser.getByteFrequencyData(dataArray);
      let average = dataArray.reduce((a,b)=>a+b)/bufferLength;
      document.body.style.backgroundColor = `rgb(${average}, 0, ${average})`;
    }
    animateAudio();
  }

  // Secret Console Message
  setTimeout(()=>{
    console.log("%cHey Anni! ðŸš€","color:#0ff;font-size:20px;");
    console.log("%cIf you are seeing this, you're special. ðŸ’– Try opening this on a PC for a surprise!","color:#0f0;font-size:16px;");
  }, 5000);

</script>

</body>
</html>
